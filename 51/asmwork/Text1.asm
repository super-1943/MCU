ORG 0000H

LJMP MAIN

ORG 0003H

LJMP INTR0

ORG 0013H

LJMP INTR1


INTR0:

DEC R7

RETI

INTR1:

     INC R7

     RETI

MAIN:

MOV R7,#01H


SETB EA

SETB EX1

SETB EX0


      MOV A,#0FFH

      MOV P1,A

      MOV A,P1

      JNB ACC.0,SIN

      CALL DELAY

      JNB ACC.1,TRI

      CALL DELAY

      JNB ACC.2,SQU

      CALL DELAY

      AJMP MAIN


TRI:MOV DPTR,#8000H

      CLR A

      MOV R0,#00H

      MOV R1,#0FEH

   L0:

      MOV A,R0

      MOVX @DPTR,A

      ACALL DELAY

      INC R0

      DJNZ R1,L0

      MOV R1,#0FEH


   L1:

      MOV A,R0

      MOVX @DPTR,A

      ACALL DELAY

      DEC R0

      DJNZ R1,L1

      MOV R1,#0FEH

      MOV A,#0FFH

      MOV P1,A

      MOV A,P1

      JNB ACC.0,SIN

      JNB ACC.2,SQU

      CLR A

      AJMP L0



SQU:MOV DPTR,#8000H

   L2:MOV A,#00H

      MOVX @DPTR,A

      CALL DELAY

      MOV A,#0FFH

      MOVX @DPTR,A

      CALL DELAY

      MOV A,#0FFH

      MOV P1,A

      MOV A,P1

      JNB ACC.0,SIN

     JNB ACC.1,TRI


      AJMP L2




SIN: MOV R1,#00H

LLL: MOV A,R1

      MOV DPTR,#TABLE

      MOVC A,@A+DPTR

      MOV DPTR,#8000H

      MOVX @DPTR,A

      CALL DELAY

      INC R1


      MOV A,#0FFH

      MOV P1,A

      MOV A,P1

      JNB ACC.1,TRI

      JNB ACC.2,SQU

      AJMP LLL


TABLE:

DB 80H, 83H, 86H, 89H, 8DH, 90H, 93H, 96H

DB 99H, 9CH, 9FH, 0A2H,0A5H,0A8H,0ABH,0AEH

DB 0B1H,0B4H,0B7H,0BAH,0BCH, 0BFH,0C2H,0C5H

DB 0C7H,0CAH,0CCH,0CFH,0D1H, 0D4H,0D6H,0D8H

DB 0DAH,0DDH,0DFH,0E1H,0E3H, 0E5H,0E7H,0E9H

DB 0EAH,0ECH,0EEH,0EFH,0F1H, 0F2H,0F4H,0F5H

DB 0F6H,0F7H,0F8H,0F9H,0FAH, 0FBH,0FCH,0FDH

DB 0FDH,0FEH,0FFH,0FFH,0FFH, 0FFH,0FFH,0FFH

DB 0FFH,0FFH,0FFH,0FFH,0FFH, 0FFH,0FEH,0FDH

DB 0FDH,0FCH,0FBH,0FAH,0F9H, 0F8H,0F7H,0F6H

DB 0F5H,0F4H,0F2H,0F1H,0EFH, 0EEH,0ECH,0EAH

DB 0E9H,0E7H,0E5H,0E3H,0E1H, 0DEH,0DDH,0DAH

DB 0D8H,0D6H,0D4H,0D1H,0CFH, 0CCH,0CAH,0C7H

DB 0C5H,0C2H,0BFH,0BCH,0BAH, 0B7H,0B4H,0B1H

DB 0AEH,0ABH,0A8H,0A5H,0A2H, 9FH, 9CH, 99H

DB 96H, 93H, 90H, 8DH, 89H, 86H, 83H, 80H

DB 80H, 7CH, 79H, 78H, 72H, 6FH, 6CH, 69H

DB 66H, 63H, 60H, 5DH, 5AH, 57H, 55H, 51H

DB 4EH, 4CH, 48H, 45H, 43H, 40H, 3DH, 3AH

DB 38H, 35H, 33H, 30H, 2EH, 2BH, 29H, 27H

DB 25H, 22H, 20H, 1EH, 1CH, 1AH, 18H, 16H

DB 15H, 13H, 11H, 10H, 0EH, 0DH, 0BH, 0AH

DB 09H, 08H, 07H, 06H, 05H, 04H, 03H, 02H

DB 02H, 01H, 00H, 00H, 00H, 00H, 00H, 00H

DB 00H, 00H, 00H, 00H, 00H, 00H, 01H, 02H

DB 02H, 03H, 04H, 05H, 06H, 07H, 08H, 09H

DB 0AH, 0BH, 0DH, 0EH, 10H, 11H, 13H, 15H

DB 16H, 18H, 1AH, 1CH, 1EH, 20H, 22H, 25H

DB 27H, 29H, 2BH, 2EH, 30H, 33H, 35H, 38H

DB 3AH, 3DH, 40H, 43H, 45H, 48H, 4CH, 4EH

DB 51H, 55H, 57H, 5AH, 5DH, 60H, 63H, 66H

DB 69H, 6CH, 6FH, 72H, 76H, 79H, 7CH, 80H

DELAY:



MOV A,R7

   MOV R6,#1H

LL:DJNZ R7,LL

LL0:MOV R7,A

    DJNZ R6,LL0



     RET
end
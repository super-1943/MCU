#include <spce061a.h>
#include <mykey.h>
#include <my7219.h>
#include <wave.h>
unsigned int mode,freq,vol,index,mem_freq,mem_vol;		
unsigned int SQUR[256]={
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,0xffc0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0
};
unsigned int TRIG[256]={
0,261,522,783,1044,1306,1567,1828,2089,2351,2612,2873,3134,3395,3657,3918,
4179,4440,4702,4963,5224,5485,5746,6008,6269,6530,6791,7053,7314,7575,7836,
8097,8359,8620,8881,9142,9404,9665,9926,10187,10448,10710,10971,11232,11493,
11755,12016,12277,12538,12800,13061,13322,13583,13844,14106,14367,14628,14889,
15151,15412,15673,15934,16195,16457,16718,16979,17240,17502,17763,18024,18285,
18546,18808,19069,19330,19591,19853,20114,20375,20636,20897,21159,21420,21681,
21942,22204,22465,22726,22987,23248,23510,23771,24032,24293,24555,24816,25077,
25338,25600,25861,26122,26383,26644,26906,27167,27428,27689,27951,28212,28473,
28734,28995,29257,29518,29779,30040,30302,30563,30824,31085,31346,31608,31869,
32130,32391,32653,32914,33175,33436,33175,32914,32653,32391,32130,31869,31608,
31346,31085,30824,30563,30302,30040,29779,29518,29257,28995,28734,28473,28212,
27951,27689,27428,27167,26906,26644,26383,26122,25861,25600,25338,25077,24816,
24555,24293,24032,23771,23510,23248,22987,22726,22465,22204,21942,21681,21420,
21159,20897,20636,20375,20114,19853,19591,19330,19069,18808,18546,18285,18024,
17763,17502,17240,16979,16718,16457,16195,15934,15673,15412,15151,14889,14628,
14367,14106,13844,13583,13322,13061,12800,12538,12277,12016,11755,11493,11232,
10971,10710,10448,10187,9926,9665,9404,9142,8881,8620,8359,8097,7836,7575,7314,
7053,6791,6530,6269,6008,5746,5485,5224,4963,4702,4440,4179,3918,3657,3395,3134,
2873,2612,2351,2089,1828,1567,1306,1044,783,522,261,

}; 
unsigned int SINE[]={
0x0190,0x019A,0x01A4,0x01AD,0x01B7,0x01C1,0x01CB,0x01D4,0x01DE,0x01E8,
0x01F1,0x01FB,0x0204,0x020D,0x0217,0x0220,0x0229,0x0232,0x023B,0x0244,
0x024D,0x0255,0x025E,0x0266,0x026E,0x0276,0x027E,0x0286,0x028E,0x0295,
0x029D,0x02A4,0x02AB,0x02B2,0x02B8,0x02BF,0x02C5,0x02CB,0x02D1,0x02D7,
0x02DD,0x02E2,0x02E7,0x02EC,0x02F1,0x02F5,0x02FA,0x02FE,0x0302,0x0305,
0x0309,0x030C,0x030F,0x0312,0x0314,0x0316,0x0318,0x031A,0x031C,0x031D,
0x031E,0x031F,0x0320,0x0320,0x0320,0x0320,0x0320,0x031F,0x031E,0x031D,
0x031C,0x031A,0x0318,0x0316,0x0314,0x0312,0x030F,0x030C,0x0309,0x0305,
0x0302,0x02FE,0x02FA,0x02F5,0x02F1,0x02EC,0x02E7,0x02E2,0x02DD,0x02D7,
0x02D1,0x02CB,0x02C5,0x02BF,0x02B8,0x02B2,0x02AB,0x02A4,0x029D,0x0295,
0x028E,0x0286,0x027E,0x0276,0x026E,0x0266,0x025E,0x0255,0x024D,0x0244,
0x023B,0x0232,0x0229,0x0220,0x0217,0x020D,0x0204,0x01FB,0x01F1,0x01E8,
0x01DE,0x01D4,0x01CB,0x01C1,0x01B7,0x01AD,0x01A4,0x019A,0x0190,0x0186,
0x017C,0x0173,0x0169,0x015F,0x0155,0x014C,0x0142,0x0138,0x012F,0x0125,
0x011C,0x0113,0x0109,0x0100,0x00F7,0x00EE,0x00E5,0x00DC,0x00D3,0x00CB,
0x00C2,0x00BA,0x00B2,0x00AA,0x00A2,0x009A,0x0092,0x008B,0x0083,0x007C,
0x0075,0x006E,0x0068,0x0061,0x005B,0x0055,0x004F,0x0049,0x0043,0x003E,
0x0039,0x0034,0x002F,0x002B,0x0026,0x0022,0x001E,0x001B,0x0017,0x0014,
0x0011,0x000E,0x000C,0x000A,0x0008,0x0006,0x0004,0x0003,0x0002,0x0001,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0001,0x0002,0x0003,0x0004,0x0006,
0x0008,0x000A,0x000C,0x000E,0x0011,0x0014,0x0017,0x001B,0x001E,0x0022,
0x0026,0x002B,0x002F,0x0034,0x0039,0x003E,0x0043,0x0049,0x004F,0x0055,
0x005B,0x0061,0x0068,0x006E,0x0075,0x007C,0x0083,0x008B,0x0092,0x009A,
0x00A2,0x00AA,0x00B2,0x00BA,0x00C2,0x00CB,0x00D3,0x00DC,0x00E5,0x00EE,
0x00F7,0x0100,0x0109,0x0113,0x011C,0x0125,0x012F,0x0138,0x0142,0x014C,
0x0155,0x015F,0x0169,0x0173,0x017C,0x0186
};
unsigned int mem_table[256];
int main(void)

{
	mode=0;
	freq=100;
	vol=20;
	init7219();
	initkey();
	initwave();
	*P_SystemClock=C_Fosc_49M;
	show(mode,freq,vol);
	while(1)
	{
		KeyScan();
		wave();
		*P_Watchdog_Clear=1;
	}
}

